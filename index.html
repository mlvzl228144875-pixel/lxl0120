<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å¯¹äº”å­æ£‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #4a90e2 0%, #2a75bb 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
            color: #030000;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* æ ‡é¢˜æ ·å¼ */
        .header {
            text-align: center;
            margin-bottom: 10px;
        }

        .header h1 {
            color: hsl(0, 0%, 100%);
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            color: hwb(0 100% 0%);
            font-size: 1.2em;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* æ¸¸æˆè§„åˆ™åŒºåŸŸ */
        .rules {
            background-color: rgba(255, 255, 255, 0.95);
            border: 2px solid #5e35b1;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .rules h2 {
            color: #5e35b1;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.5em;
        }

        .rules ul {
            list-style-type: none;
            padding-left: 10px;
        }

        .rules li {
            margin-bottom: 10px;
            line-height: 1.6;
            color: #333;
        }

        .rules li:before {
            content: "â€¢ ";
            color: #5e35b1;
            font-weight: bold;
        }

        /* å›åˆæç¤ºæ  */
        .turn-indicator {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: #5e35b1;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            margin-bottom: 20px;
            animation: pulse 2s infinite alternate;
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .game-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: nowrap;
            width: 100%;
        }

        /* æ£‹ç›˜åŒºåŸŸ */
        .board-container {
            background: linear-gradient(to bottom, #d2aa5e 0%, #b88d3c 100%);
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            position: relative;
            flex: 0 0 auto;
        }

        .board {
            position: relative;
            width: 550px;
            height: 550px;
        }

        .grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .grid-line {
            position: absolute;
            background-color: #333;
        }

        .grid-line.horizontal {
            width: 100%;
            height: 1px;
        }

        .grid-line.vertical {
            width: 1px;
            height: 100%;
        }

        .coordinates {
            position: absolute;
            font-size: 20px;
            font-weight: bold;
            color: hwb(60 0% 97%);
            z-index: 1;
        }

        .coordinates.col {
            bottom: -25px;
            text-align: center;
            width: 45px;
        }

        .coordinates.row {
            left: -25px;
            transform: translateY(-50%);
        }

        .stone {
            position: absolute;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .stone:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }

        .stone.black {
            background-color: #000;
        }

        .stone.white {
            background-color: #fff;
            border: 1px solid #ddd;
        }

        /* ç©å®¶è¾“å…¥åŒºåŸŸ */
        .player-input {
            flex: 0 0 280px;
            display: flex;
            flex-direction: column;
            height: 630px;
        }

        .player-section {
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .black-section {
            border-left: 5px solid #29b6f6;
            background: linear-gradient(to bottom, #e1f5fe 0%, #b3e5fc 100%);
        }

        .white-section {
            border-left: 5px solid #ff9800;
            background: linear-gradient(to bottom, #fff8e1 0%, #ffe082 100%);
        }
        
        .player-image {
            margin-bottom: 15px;
            text-align: center;
        }

        .player-section h3 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .black-section h3 {
            color: #01579b;
        }

        .white-section h3 {
            color: #e65100;
        }

        /* ç©å®¶é€šçŸ¥åŒºåŸŸæ ·å¼ */
        .player-notification {
            margin: 10px auto 0;
            padding: 8px 12px;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            font-size: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 200px;
        }

        .player-notification.show {
            opacity: 1;
        }

        .player-notification.error {
            background-color: #ffd9d9;
            color: #e57373;
            border: 2px solid #ff8a80;
        }

        .player-notification.success {
            background-color: #e8f5e9;
            color: #66bb6a;
            border: 2px solid #81c784;
        }

        .player-notification.info {
            background-color: #e1f5fe;
            color: #64b5f6;
            border: 2px solid #90caf9;
        }

        /* æ•°å¯¹è¾“å…¥æ¡†æ ·å¼ - ç¡®ä¿æ°´å¹³æ’åˆ— */
        .coordinate-input {
            margin: 20px 0;
            font-size: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: nowrap;
            gap: 10px;
            flex-shrink: 0;
        }

        .bracket {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            display: flex;
            align-items: center;
        }

        .coord-input {
            width: 80px;
            height: 50px;
            padding: 8px;
            text-align: center;
            font-size: 40px;
            font-weight: bold;
            border: 3px solid #bdbdbd;
            border-radius: 8px;
            background-color: white;
            transition: border-color 0.3s ease, transform 0.2s ease;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .coord-input:focus {
            border-color: #5e35b1;
            outline: none;
            transform: scale(1.05);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1), 0 0 0 3px rgba(94, 53, 177, 0.2);
        }

        .comma {
            font-size: 24px;
            font-weight: bold;
            color: #666;
            display: flex;
            align-items: center;
        }
        
        /* å“åº”å¼è®¾è®¡ - ç¡®ä¿iPadç§»åŠ¨ç«¯ä¸Šä¹Ÿèƒ½ä¿æŒæ°´å¹³æ’åˆ— */
        @media (max-width: 768px) {
            .coordinate-input {
                padding: 0 10px;
            }
            
            .coord-input {
                width: 45px;
                height: 36px;
                font-size: 16px;
            }
            
            .bracket {
                font-size: 20px;
            }
            
            .comma {
               font-size: 18px;
            }
        }
        
        @media (max-width: 480px) {
            .coord-input {
                width: 40px;
                height: 32px;
                font-size: 14px;
            }
            
            .bracket {
                font-size: 18px;
            }
            
            .comma {
                font-size: 16px;
            }
        }

        .place-btn {
            width: 100px;
            height: 100px;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
            display: block;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .place-btn.black {
            background: linear-gradient(to bottom, #66bb6a 0%, #43a047 100%);
            color: white;
        }

        .place-btn.black:hover {
            background: linear-gradient(to bottom, #4caf50 0%, #388e3c 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .place-btn.white {
            background: linear-gradient(to bottom, #ffb74d 0%, #ff9800 100%);
            color: white;
        }

        .place-btn.white:hover {
            background: linear-gradient(to bottom, #ff9800 0%, #f57c00 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .place-btn:disabled {
            background-color: #bdbdbd;
            cursor: not-allowed;
        }

        /* èƒœè´Ÿä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸæ ·å¼ */
        .game-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1000;
            display: none;
            max-width: 300px;
            border: 3px solid #5e35b1;
        }

        .game-status.show {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        .game-status h2 {
            color: #5e35b1;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .game-status p {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #424242;
        }

        .restart-btn {
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            background: linear-gradient(to bottom, #9575cd 0%, #7e57c2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .restart-btn:hover {
            background: linear-gradient(to bottom, #7e57c2 0%, #673ab7 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        /* æ£‹å­é«˜äº®æ•ˆæœ */
        .stone.highlight {
            box-shadow: 0 0 20px 5px rgba(255, 215, 0, 0.8), 0 0 10px 2px rgba(255, 215, 0, 0.6) inset;
            animation: pulse-glow 1s infinite alternate;
            transform: translate(-50%, -50%) scale(1.2);
            z-index: 10;
        }
        
        /* åæ ‡æ˜¾ç¤ºæ ·å¼ */
        .stone-coordinate {
            font-size: 14px;
            font-weight: bold;
            color: black;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 3px 6px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 20;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-align: center;
            white-space: nowrap;
        }
        
        .coordinate-top {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .coordinate-left {
            position: absolute;
            left: -60px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .stone-coordinate.show {
            opacity: 1;
        }
        
        .coordinate-top.show {
            animation: bounce-in 0.5s ease;
        }
        
        .coordinate-left.show {
            animation: bounce-in-left 0.5s ease;
        }
        
        /* çº¢è‰²åæ ‡æ–‡æœ¬ */
        .stone-coordinate .red-text {
            color: red;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 15px 3px rgba(255, 215, 0, 0.6), 0 0 8px 1px rgba(255, 215, 0, 0.4) inset; }
            100% { box-shadow: 0 0 25px 7px rgba(255, 215, 0, 0.9), 0 0 12px 3px rgba(255, 215, 0, 0.7) inset; }
        }
        
        @keyframes bounce-in {
            0% { opacity: 0; transform: translateX(-50%) scale(0); }
            70% { opacity: 0.8; transform: translateX(-50%) scale(1.1); }
            100% { opacity: 1; transform: translateX(-50%) scale(1); }
        }
        
        @keyframes bounce-in-left {
            0% { opacity: 0; transform: translateY(-50%) scale(0); }
            70% { opacity: 0.8; transform: translateY(-50%) scale(1.1); }
            100% { opacity: 1; transform: translateY(-50%) scale(1); }
        }
        
        @keyframes bounce-in-left {
            0% { transform: translateY(-50%) scale(0); }
            70% { transform: translateY(-50%) scale(1.1); }
            100% { transform: translateY(-50%) scale(1); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 900px) {
            .game-content {
                flex-direction: column;
                align-items: center;
                gap: 30px;
            }

            .player-input {
                flex-direction: row;
                gap: 30px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .board {
                width: 400px;
                height: 400px;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2em;
            }

            .header p {
                font-size: 1.1em;
            }

            .board {
                width: 350px;
                height: 350px;
            }

            .coordinate-input {
                font-size: 18px;
            }

            .coord-input {
                width: 50px;
                height: 40px;
                font-size: 18px;
            }

            .bracket {
                font-size: 24px;
            }

            .turn-indicator {
                font-size: 1.2em;
                padding: 12px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .board {
                width: 280px;
                height: 280px;
            }

            .board-container {
                padding: 20px;
                border-radius: 12px;
            }

            .coordinates {
                font-size: 14px;
            }

            .coordinate-input {
                font-size: 16px;
                gap: 5px;
            }

            .coord-input {
                width: 45px;
                height: 35px;
                font-size: 16px;
            }

            .bracket {
                font-size: 20px;
            }

            .comma {
                font-size: 18px;
            }

            .place-btn {
                width: 60px;
                height: 60px;
                font-size: 18px;
            }
            
            .player-section {
                padding: 15px;
            }

            .modal-content {
                padding: 30px 20px;
                margin-top: 30px;
            }
        }
        
        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }
    </style>
</head>
<body>
    <div class="container">
         <header class="header">
             <h1>è¾“å…¥æ•°å¯¹æ¥ä¸‹ä¸€ç›˜äº”å­æ£‹</h1>
         </header>

        <!-- å›åˆæŒ‡ç¤ºå™¨ç§»é™¤ï¼Œæ”¹ä¸ºåœ¨å„è‡ªè¾“å…¥åŒºæ˜¾ç¤º -->

        <div class="game-content">
            <div class="player-input">
                <div class="player-section black-section">
                    <div class="player-image">
                        <img src="bq.png" alt="é»‘æ£‹" style="max-width: 150px; max-height: 150px; display: block; margin: 0 auto;">
                    </div>
                    <h2>ç”²æ–¹ (é»‘æ£‹)</h2>
                    <div class="coordinate-input">
                        <span class="bracket" style="font-size: 30px;">(</span>
                        <input type="number" id="blackCol" class="coord-input" min="0" max="10" >
                        <span class="comma" style="font-size: 30px;">,</span>
                        <input type="number" id="blackRow" class="coord-input" min="0" max="10">
                        <span class="bracket" style="font-size: 30px;">)</span>
                    </div>
                    <button type="button" class="place-btn black" id="placeBlackBtn">è½å­</button>
                    <div class="player-notification" id="blackNotification">è½®åˆ°ä½ ä¸‹æ£‹äº†ï¼</div>
                </div>
            </div>
            
            <div class="board-container">
                <div class="board" id="board">
                    <div class="grid" id="grid"></div>
                    <!-- æ£‹å­å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>

            <div class="player-input">
                <div class="player-section white-section">
                    <div class="player-image">
                        <img src="wq.png" alt="ç™½æ£‹" style="max-width: 150px; max-height: 150px; display: block; margin: 0 auto;">
                    </div>
                    <h2>ä¹™æ–¹ (ç™½æ£‹)</h2>
                    <div class="coordinate-input">
                        <span class="bracket" style="font-size: 30px;">(</span>
                        <input type="number" id="whiteCol" class="coord-input" min="0" max="10" >
                        <span class="comma" style="font-size: 30px;">,</span>
                        <input type="number" id="whiteRow" class="coord-input" min="0" max="10" >
                        <span class="bracket" style="font-size: 30px;">)</span>
                    </div>
                    <button type="button" class="place-btn white" id="placeWhiteBtn" disabled>è½å­</button>
                    <div class="player-notification" id="whiteNotification">ç­‰å¾…é»‘æ£‹è½å­...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¸¸æˆçŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ -->
    <div class="game-status" id="gameStatus">
        <h2 id="statusTitle">ğŸ‰ æ¸¸æˆç»“æŸï¼</h2>
        <p id="winnerMessage">é»‘æ£‹è·èƒœï¼</p>
        <button class="restart-btn" id="restartBtn">é‡æ–°å¼€å§‹</button>
    </div>

    <script>
        // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
        let currentPlayer = 'black'; // 'black' æˆ– 'white'
        let gameBoard = Array(12).fill().map(() => Array(11).fill(null)); // 12x11 æ•°ç»„ï¼Œç´¢å¼• 0-10 æœ‰æ•ˆ
        const board = document.getElementById('board');
        const grid = document.getElementById('grid');
        const placeBlackBtn = document.getElementById('placeBlackBtn');
        const placeWhiteBtn = document.getElementById('placeWhiteBtn');
        const blackColInput = document.getElementById('blackCol');
        const blackRowInput = document.getElementById('blackRow');
        const whiteColInput = document.getElementById('whiteCol');
        const whiteRowInput = document.getElementById('whiteRow');
        const gameStatus = document.getElementById('gameStatus');
        const statusTitle = document.getElementById('statusTitle');
        const winnerMessage = document.getElementById('winnerMessage');
        const restartBtn = document.getElementById('restartBtn');
        const blackNotification = document.getElementById('blackNotification');
        const whiteNotification = document.getElementById('whiteNotification');
        let gameOver = false;
        
        // åˆ›å»ºéŸ³é¢‘å¯¹è±¡
        const stoneAudio = new Audio('lz.mp3'); // è½å­éŸ³æ•ˆ
        const winAudio = new Audio('lb.mp3'); // èƒœåˆ©éŸ³æ•ˆ


        // ç»˜åˆ¶æ£‹ç›˜ç½‘æ ¼å’Œåæ ‡
        function drawBoard() {
            const cellSize = board.clientWidth / 10;
            
            // æ¸…ç©ºç½‘æ ¼
            grid.innerHTML = '';
            
            // ç»˜åˆ¶æ°´å¹³çº¿
            for (let i = 0; i <= 10; i++) {
                const line = document.createElement('div');
                line.className = 'grid-line horizontal';
                line.style.top = `${i * cellSize}px`;
                grid.appendChild(line);
            }
            
            // ç»˜åˆ¶å‚ç›´çº¿
            for (let i = 0; i <= 10; i++) {
                const line = document.createElement('div');
                line.className = 'grid-line vertical';
                line.style.left = `${i * cellSize}px`;
                grid.appendChild(line);
            }
            
            // åœ¨äº¤å‰ç‚¹ç»˜åˆ¶å°åœ†ç‚¹ï¼Œçªå‡ºè½å­ä½ç½®
            for (let x = 0; x <= 10; x++) {
                for (let y = 0; y <= 10; y++) {
                    const dot = document.createElement('div');
                    dot.style.position = 'absolute';
                    dot.style.width = '8px';
                    dot.style.height = '8px';
                    
                    // ç‰¹æ®Šä½ç½®ç”¨ä¸åŒé¢œè‰²æ ‡è®°
                    if ((x === 3 || x === 7) && (y === 3 || y === 7) || 
                        (x === 5 && y === 5)) {
                        dot.style.backgroundColor = '#8b4513';
                        dot.style.width = '12px';
                        dot.style.height = '12px';
                    } else {
                        dot.style.backgroundColor = '#654321';
                    }
                    
                    dot.style.borderRadius = '50%';
                    dot.style.left = `${x * cellSize}px`;
                    dot.style.top = `${y * cellSize}px`;
                    dot.style.transform = 'translate(-50%, -50%)';
                    dot.style.zIndex = '1';
                    grid.appendChild(dot);
                }
            }
            
            // æ·»åŠ åˆ—åæ ‡ï¼ˆä»0å¼€å§‹åˆ°10ï¼‰
            for (let i = 0; i <= 10; i++) {
                const coord = document.createElement('div');
                coord.className = 'coordinates col';
                coord.style.left = `${i * cellSize - 22.5}px`; // è°ƒæ•´ä½ç½®ä»¥å±…ä¸­æ˜¾ç¤ºï¼Œè€ƒè™‘45pxçš„å®½åº¦
                coord.textContent = i;
                
                // ç‰¹æ®Šæ ‡è®°0å’Œ5åˆ—
                if (i === 0) {
                    coord.style.fontWeight = 'bold';
                }
                
                grid.appendChild(coord);
            }
            
            // æ·»åŠ è¡Œåæ ‡ï¼ˆä»ä¸‹å¾€ä¸Š0-10ï¼‰
            for (let i = 0; i <= 10; i++) {
                const coord = document.createElement('div');
                coord.className = 'coordinates row';
                coord.style.top = `${(10 - i) * cellSize}px`;
                coord.textContent = i;
                grid.appendChild(coord);
            }
        }

        // æ”¾ç½®æ£‹å­
        function placeStone(col, row, color) {
            if (col < 0 || col > 10 || row < 0 || row > 10) {
                showNotification('è¯·è¾“å…¥æ­£ç¡®çš„æ•°å¯¹å“¦ï¼åˆ—æ˜¯0-10ï¼Œè¡Œæ˜¯0-10', 'error', color);
                return false;
            }
            
            // è½¬æ¢ç”¨æˆ·è¾“å…¥çš„è¡Œåæ ‡ï¼ˆ0-10ï¼Œä»ä¸‹å¾€ä¸Šï¼‰ä¸ºå†…éƒ¨åæ ‡ï¼ˆ1-10ï¼Œä»ä¸Šå¾€ä¸‹ï¼‰
            const internalRow = 10 - row;
            
            if (gameBoard[col][internalRow] !== null) {
                showNotification('è¿™ä¸ªä½ç½®å·²ç»æœ‰æ£‹å­äº†ï¼Œè¯·æ¢ä¸€ä¸ªä½ç½®å§ï¼', 'error', color);
                return false;
            }
            
            const cellSize = board.clientWidth / 10;
            
            // åˆ›å»ºæ£‹å­å…ƒç´ 
            const stone = document.createElement('div');
            stone.className = `stone ${color}`;
            stone.style.left = `${col * cellSize}px`;
            stone.style.top = `${internalRow * cellSize}px`;
            stone.dataset.col = col;
            stone.dataset.row = row; // ä¿å­˜ç”¨æˆ·çœ‹åˆ°çš„è¡Œåæ ‡
            
            // æ·»åŠ åˆ°æ£‹ç›˜
            grid.appendChild(stone);
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            gameBoard[col][internalRow] = color;
            
            // æ’­æ”¾è½å­éŸ³æ•ˆ
            try {
                stoneAudio.currentTime = 0; // é‡ç½®éŸ³é¢‘
                stoneAudio.play().catch(error => {
                    console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                });
            } catch (e) {
                // å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ï¼Œåˆ™è·³è¿‡
            }
            
            // æ˜¾ç¤ºæ”¾ç½®æˆåŠŸæç¤ºåœ¨å½“å‰ç©å®¶åŒºåŸŸ
            const colorText = color === 'black' ? 'é»‘æ£‹' : 'ç™½æ£‹';
            showNotification(`${colorText}å·²æˆåŠŸæ”¾ç½®åœ¨(${col}, ${row})ï¼çœŸæ£’ï¼`, 'success', color);
            
            return true;
        }

        // åˆ‡æ¢ç©å®¶
        function switchPlayer() {
            currentPlayer = currentPlayer === 'black' ? 'white' : 'black';
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            placeBlackBtn.disabled = currentPlayer !== 'black';
            placeWhiteBtn.disabled = currentPlayer !== 'white';
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            if (currentPlayer === 'black') {
                blackColInput.value = '';
                blackRowInput.value = '';
                blackColInput.focus();
                // æ˜¾ç¤ºé»‘æ£‹å›åˆæç¤ºï¼Œéšè—ç™½æ£‹æç¤º
                showNotification('ğŸ–¤ è½®åˆ°ä½ ä¸‹æ£‹äº†ï¼', 'info', 'black');
                showNotification('ç­‰å¾…é»‘æ£‹è½å­...', 'info', 'white');
            } else {
                whiteColInput.value = '';
                whiteRowInput.value = '';
                whiteColInput.focus();
                // æ˜¾ç¤ºç™½æ£‹å›åˆæç¤ºï¼Œéšè—é»‘æ£‹æç¤º
                showNotification('ç­‰å¾…ç™½æ£‹è½å­...', 'info', 'black');
                showNotification('âšª è½®åˆ°ä½ ä¸‹æ£‹äº†ï¼', 'info', 'white');
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥ - åœ¨ç©å®¶å¯¹åº”çš„è¾“å…¥åŒºè½å­æŒ‰é’®ä¸‹æ–¹æ˜¾ç¤º
        function showNotification(message, type = 'info', player = null) {
            // ç¡®å®šè¦ä½¿ç”¨å“ªä¸ªé€šçŸ¥åŒºåŸŸ
            const notification = player === 'black' ? blackNotification : 
                               (player === 'white' ? whiteNotification : null);
            
            if (notification) {
                // è®¾ç½®æ¶ˆæ¯å†…å®¹
                notification.textContent = message;
                
                // ç§»é™¤æ‰€æœ‰ç±»å‹ç±»
                notification.classList.remove('error', 'success', 'info');
                
                // æ·»åŠ æ–°ç±»å‹ç±»
                notification.classList.add(type);
                
                // æ˜¾ç¤ºé€šçŸ¥
                notification.classList.add('show');
                
                // å¯¹äºæ¸¸æˆçŠ¶æ€é€šçŸ¥ï¼ˆè½®åˆ°è°ä¸‹æ£‹ï¼‰ï¼Œä¸è¦è‡ªåŠ¨éšè—
                if (type !== 'info' || message.includes('æˆåŠŸæ”¾ç½®') || message.includes('è¯·è¾“å…¥æ­£ç¡®') || message.includes('è¿™ä¸ªä½ç½®å·²ç»æœ‰æ£‹å­')) {
                    // 3ç§’åéšè—ï¼Œä½†ä¿ç•™å…ƒç´ 
                    setTimeout(() => {
                        notification.classList.remove('show');
                    }, 3000);
                }
            }
        }
        
        // æ£€æŸ¥æ˜¯å¦è·èƒœï¼Œå¹¶è¿”å›è·èƒœä¿¡æ¯
        function checkWin(col, row, color) {
            // æ£€æŸ¥æ–¹å‘ï¼šæ°´å¹³ã€å‚ç›´ã€å¯¹è§’çº¿1ã€å¯¹è§’çº¿2
            const directions = [
                [1, 0],   // æ°´å¹³
                [0, 1],   // å‚ç›´
                [1, 1],   // å¯¹è§’çº¿1
                [1, -1]   // å¯¹è§’çº¿2
            ];
            const directionNames = ['horizontal', 'vertical', 'diagonal1', 'diagonal2'];
            
            for (let dirIndex = 0; dirIndex < directions.length; dirIndex++) {
                const [dx, dy] = directions[dirIndex];
                let count = 1; // å½“å‰æ£‹å­ç®—1ä¸ª
                let winningStones = [[col, row]];
                
                // æ­£å‘æ£€æŸ¥
                for (let i = 1; i < 5; i++) {
                    const newCol = col + i * dx;
                    const newRow = row + i * dy;
                    
                    if (newCol < 0 || newCol > 10 || newRow < 1 || newRow > 10 || 
                        gameBoard[newCol][newRow] !== color) {
                        break;
                    }
                    count++;
                    winningStones.push([newCol, newRow]);
                }
                
                // åå‘æ£€æŸ¥
                for (let i = 1; i < 5; i++) {
                    const newCol = col - i * dx;
                    const newRow = row - i * dy;
                    
                    if (newCol < 0 || newCol > 10 || newRow < 1 || newRow > 10 || 
                        gameBoard[newCol][newRow] !== color) {
                        break;
                    }
                    count++;
                    winningStones.unshift([newCol, newRow]);
                }
                
                if (count >= 5) {
                    // æˆªå–è¿ç»­çš„5ä¸ªæ£‹å­
                    if (winningStones.length > 5) {
                        // å¦‚æœè¶…è¿‡5ä¸ªï¼Œä¿ç•™ä¸­é—´çš„5ä¸ª
                        const startIndex = Math.floor((winningStones.length - 5) / 2);
                        winningStones = winningStones.slice(startIndex, startIndex + 5);
                    }
                    return {
                        isWin: true,
                        stones: winningStones,
                        direction: directionNames[dirIndex],
                        color: color
                    };
                }
            }
            
            return { isWin: false };
        }
        
        // é«˜äº®æ˜¾ç¤ºè·èƒœçš„æ£‹å­å¹¶åŠ¨æ€æ˜¾ç¤ºåæ ‡
        function highlightWinningStones(winInfo) {
            if (!winInfo.isWin) return;
            
            const direction = winInfo.direction;
            
            // ä¸ºæ¯ä¸ªè·èƒœæ£‹å­æ·»åŠ é«˜äº®å’Œåæ ‡æ˜¾ç¤º
            winInfo.stones.forEach(([row, col], index) => {
                // æ³¨æ„ï¼šè¿™é‡Œçš„rowå’Œcolå·²ç»æ˜¯ç”¨æˆ·è¡Œåæ ‡å’Œåˆ—åæ ‡
                
                // æ‰¾åˆ°å¯¹åº”çš„æ£‹å­å…ƒç´ 
                const stone = document.querySelector(`.stone[data-row="${row}"][data-col="${col}"]`);
                if (stone) {
                    setTimeout(() => {
                        // æ·»åŠ é«˜äº®æ•ˆæœ
                        stone.classList.add('highlight');
                        
                        // åˆ›å»ºåæ ‡æ˜¾ç¤ºå…ƒç´ 
                        const coordElement = document.createElement('div');
                        coordElement.classList.add('stone-coordinate');
                        
                        // æ ¹æ®è¿æ¥æ–¹å‘è®¾ç½®ä¸åŒçš„CSSç±»å’Œä½ç½®
                        if (direction === 'vertical') {
                            // å‚ç›´æ–¹å‘ï¼Œåæ ‡æ˜¾ç¤ºåœ¨å·¦ä¾§
                            coordElement.classList.add('coordinate-left');
                        } else {
                            // å…¶ä»–æ–¹å‘ï¼Œåæ ‡æ˜¾ç¤ºåœ¨ä¸Šæ–¹
                            coordElement.classList.add('coordinate-top');
                        }
                        
                        // æ ¹æ®æ–¹å‘è®¾ç½®çº¢è‰²æ˜¾ç¤º
                        if (direction === 'vertical') {
                            // åŒä¸€åˆ—ï¼Œåˆ—åæ ‡çº¢è‰²
                            coordElement.innerHTML = `${row},<span class="red-text">${col}</span>`;
                        } else if (direction === 'horizontal') {
                            // åŒä¸€è¡Œï¼Œè¡Œåæ ‡çº¢è‰²
                            coordElement.innerHTML = `<span class="red-text">${row}</span>,${col}`;
                        } else {
                            // å¯¹è§’çº¿æ–¹å‘ï¼Œæ ¹æ®æƒ…å†µå¤„ç†
                            const rowDiff = Math.abs(winInfo.stones[0][0] - winInfo.stones[4][0]);
                            const colDiff = Math.abs(winInfo.stones[0][1] - winInfo.stones[4][1]);
                            if (rowDiff > colDiff) {
                                coordElement.innerHTML = `<span class="red-text">${row}</span>,${col}`;
                            } else {
                                coordElement.innerHTML = `${row},<span class="red-text">${col}</span>`;
                            }
                        }
                        
                        // æ ¹æ®æ£‹å­é¢œè‰²è®¾ç½®åæ ‡èƒŒæ™¯é¢œè‰²å’Œæ–‡å­—é¢œè‰²
                        const isBlack = stone.classList.contains('black');
                        coordElement.style.backgroundColor = isBlack ? 'rgba(255,255,255,0.95)' : 'rgba(0,0,0,0.95)';
                        coordElement.style.color = isBlack ? 'black' : 'white';
                        
                        stone.appendChild(coordElement);
                        
                        // æ˜¾ç¤ºåæ ‡ï¼Œåº”ç”¨åŠ¨ç”»
                        setTimeout(() => {
                            coordElement.classList.add('show');
                        }, 50);
                    }, index * 300); // æŒ‰é¡ºåºä¾æ¬¡æ˜¾ç¤ºï¼Œæ¯ä¸ªé—´éš”300æ¯«ç§’
                }
            });
        }

        // æ˜¾ç¤ºæ¸¸æˆçŠ¶æ€
        function showGameStatus(winner) {
            // è®¾ç½®æ¸¸æˆç»“æŸæ ‡å¿—
            gameOver = true;
            
            // æ˜¾ç¤ºè·èƒœä¿¡æ¯
            winnerMessage.textContent = `${winner === 'black' ? 'é»‘æ£‹' : 'ç™½æ£‹'}è·èƒœï¼`;
            
            // åœ¨å³ä¸Šè§’æ˜¾ç¤ºçŠ¶æ€
            gameStatus.classList.add('show');
            
            // ç¦ç”¨æ‰€æœ‰æŒ‰é’®
            placeBlackBtn.disabled = true;
            placeWhiteBtn.disabled = true;
            
            // æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ
            try {
                winAudio.currentTime = 0; // é‡ç½®éŸ³é¢‘
                winAudio.play().catch(error => {
                    console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                });
            } catch (e) {
                // å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ï¼Œåˆ™è·³è¿‡
            }
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            // æ¸…ç©ºæ£‹ç›˜
            const stones = document.querySelectorAll('.stone');
            stones.forEach(stone => stone.remove());
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameBoard = Array(12).fill().map(() => Array(11).fill(null)); // 12x11 æ•°ç»„ï¼Œç´¢å¼• 0-10 æœ‰æ•ˆ
            currentPlayer = 'black';
            gameOver = false;
            
            // æ›´æ–°ç•Œé¢
            placeBlackBtn.disabled = false;
            placeWhiteBtn.disabled = true;
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            blackColInput.value = '';
            blackRowInput.value = '';
            whiteColInput.value = '';
            whiteRowInput.value = '';
            
            // éšè—æ¸¸æˆçŠ¶æ€
            gameStatus.classList.remove('show');
            
            // æ˜¾ç¤ºé‡ç½®æˆåŠŸæç¤ºå’Œå›åˆæç¤º
            showNotification('æ¸¸æˆå·²é‡ç½®ï¼Œè®©æˆ‘ä»¬å†æ¥ä¸€å±€å§ï¼', 'success', 'black');
            showNotification('ç­‰å¾…é»‘æ£‹è½å­...', 'info', 'white');
            blackColInput.focus();
        }

        // å¤„ç†æ”¾ç½®æ£‹å­çš„é€šç”¨å‡½æ•°
        function placeStoneForPlayer(player) {
            // å¦‚æœæ¸¸æˆå·²ç»“æŸï¼Œä¸å¤„ç†æ–°çš„è½å­
            if (gameOver) {
                showNotification('æ¸¸æˆå·²ç»“æŸï¼Œè¯·é‡æ–°å¼€å§‹ï¼', 'error', player);
                return;
            }
            
            const colInput = player === 'black' ? blackColInput : whiteColInput;
            const rowInput = player === 'black' ? blackRowInput : whiteRowInput;
            
            // æ£€æŸ¥åæ ‡æ˜¯å¦ä¸ºç©º
            if (colInput.value === '' || rowInput.value === '') {
                showNotification('è¯·è¾“å…¥åˆ—å’Œè¡Œåæ ‡ï¼', 'error', player);
                return;
            }
            
            const col = parseInt(colInput.value);
            const row = parseInt(rowInput.value);
            
            if (isNaN(col) || isNaN(row)) {
                showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—å“¦ï¼', 'error', player);
                return;
            }
            
            if (placeStone(col, row, player)) {
                // æ£€æŸ¥æ˜¯å¦è·èƒœ
                const winInfo = checkWin(col, 10 - row, player);
                if (winInfo.isWin) {
                    // é«˜äº®æ˜¾ç¤ºè·èƒœæ£‹å­å¹¶æ˜¾ç¤ºåæ ‡
                    highlightWinningStones(winInfo);
                    // åœ¨å³ä¸Šè§’æ˜¾ç¤ºè·èƒœä¿¡æ¯
                    setTimeout(() => {
                        showGameStatus(player);
                    }, 1500); // ç­‰å¾…åæ ‡æ˜¾ç¤ºåŠ¨ç”»å®Œæˆåå†æ˜¾ç¤ºçŠ¶æ€
                    return;
                }
                
                // åˆ‡æ¢ç©å®¶
                switchPlayer();
            }
        }

        // å¤„ç†å›è½¦é”®äº‹ä»¶
        function handleEnterKey(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                if (!gameOver) {
                    if (currentPlayer === 'black') {
                        placeStoneForPlayer('black');
                    } else {
                        placeStoneForPlayer('white');
                    }
                }
            }
        }

        // äº‹ä»¶ç›‘å¬ï¼šæ”¾ç½®é»‘æ£‹
        placeBlackBtn.addEventListener('click', () => placeStoneForPlayer('black'));

        // äº‹ä»¶ç›‘å¬ï¼šæ”¾ç½®ç™½æ£‹
        placeWhiteBtn.addEventListener('click', () => placeStoneForPlayer('white'));
        
        // æ·»åŠ è¾“å…¥æ¡†é”®ç›˜äº‹ä»¶ç›‘å¬
        blackColInput.addEventListener('keypress', handleEnterKey);
        blackRowInput.addEventListener('keypress', handleEnterKey);
        whiteColInput.addEventListener('keypress', handleEnterKey);
        whiteRowInput.addEventListener('keypress', handleEnterKey);

        // äº‹ä»¶ç›‘å¬ï¼šé‡æ–°å¼€å§‹
        restartBtn.addEventListener('click', resetGame);

        // äº‹ä»¶ç›‘å¬ï¼šçª—å£å¤§å°æ”¹å˜æ—¶é‡ç»˜æ£‹ç›˜
        window.addEventListener('resize', drawBoard);

        // åˆå§‹åŒ–
        drawBoard();
        blackColInput.focus();
        
        // åˆå§‹åŒ–æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        showNotification('ğŸ–¤ è½®åˆ°ä½ ä¸‹æ£‹äº†ï¼', 'info', 'black');
        showNotification('ç­‰å¾…é»‘æ£‹è½å­...', 'info', 'white');
</script>
</body>
</html>
